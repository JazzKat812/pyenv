VERSION='7.3.8'
PYVER='3.7'
# https://www.pypy.org/checksums.html
# https://downloads.python.org/pypy

case "$(pypy_architecture 2>/dev/null || true)" in
"linux" )
  install_package "pypy${PYVER}-v${VERSION}linux32" "https://downloads.python.org/pypy/pypy${PYVER}-v${VERSION}linux32.tar.bz2#38429ec6ea1aca391821ee4fbda7358ae86de4600146643f2af2fe2c085af839" "pypy" "verify_py${PYVER//./}" ensurepip
  ;;
"linux64" )
  install_package "pypy${PYVER}-v${VERSION}linux64" "https://downloads.python.org/pypy/pypy${PYVER}-v${VERSION}linux64.tar.bz2#409085db79a6d90bfcf4f576dca1538498e65937acfbe03bd4909bdc262ff378" "pypy" "verify_py${PYVER//./}" ensurepip
  ;;
"linux-aarch64" )
  install_package "pypy${PYVER}-v${VERSION}-aarch64" "https://downloads.python.org/pypy/pypy${PYVER}-v${VERSION}-aarch64.tar.bz2#4fb2f8281f3aaca72e6fe62ecc5fc054fcc79cd061ca3e0eea730f7d82d610d4" "pypy" "verify_py${PYVER//./}" ensurepip
  ;;
"s390x" )
  install_package "pypy${PYVER}-v${VERSION}-s390x" "https://downloads.python.org/pypy/pypy${PYVER}-v${VERSION}-s390x.tar.bz2#5c2cd3f7cf04cb96f6bcc6b02e271f5d7275867763978e66651b8d1605ef3141" "pypy" "verify_py${PYVER//./}" ensurepip
  ;;
"osx64" )
  if require_osx_version "10.13"; then
    install_package "pypy${PYVER}-v${VERSION}osx64" "https://downloads.python.org/pypy/pypy${PYVER}-v${VERSION}osx64.tar.bz2#76b8eef5b059a7e478f525615482d2a6e9feb83375e3f63c16381d80521a693f" "pypy" "verify_py${PYVER//./}" ensurepip
  else
    { echo
      colorize 1 "ERROR"
      echo ": The binary distribution of PyPy is not available for $(pypy_architecture 2>/dev/null || true), OS X < 10.13."
      echo "try 'pypy${PYVER}-${VERSION}src' to build from source."
      echo
    } >&2
    exit 1
  fi
  ;;
"win64" )
  install_zip "pypy${PYVER}-v${VERSION}win64" "https://downloads.python.org/pypy/pypy${PYVER}-v${VERSION}win64.zip#96df67492bc8d62b2e71dddf5f6c58965a26cac9799c5f4081401af0494b3bcc" "pypy" "verify_py${PYVER//./}" ensurepip
  ;;
* )
  { echo
    colorize 1 "ERROR"
    echo ": The binary distribution of PyPy is not available for $(pypy_architecture 2>/dev/null || true)."
    echo "try 'pypy${PYVER}-${VERSION}src' to build from source."
    echo
  } >&2
  exit 1
  ;;
esac
